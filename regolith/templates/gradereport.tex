{% raw %}
\documentclass[letterpaper,11pt]{article}
\newlength{\outerbordwidth}
\pagestyle{empty}
\raggedbottom
\raggedright
\usepackage[svgnames]{xcolor}
\usepackage{framed}
\usepackage{tocloft}
\usepackage[backend=bibtex,maxnames=99]{biblatex}
\usepackage{hyperref}

%-----------------------------------------------------------
% Hyperlink setup
\hypersetup{
    colorlinks=true,        % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links
    citecolor=green,        % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=red            % color of external links
}

%-----------------------------------------------------------
%Edit these values as you see fit

% Width of border outside of title bars
\setlength{\outerbordwidth}{3pt}
% Outer background color of title bars (0 = black, 1 = white)
\definecolor{shadecolor}{gray}{0.75}
% Inner background color of title bars
\definecolor{shadecolorB}{gray}{0.93}


%-----------------------------------------------------------
{% endraw %}

\title{ {{course_id}} Grades }
\author{ {{student_id}} }
\date{\today}

\begin{document}
\maketitle

\begin{tabular}[h]{|l||c|c|c|c|}
\hline
\textbf{Category} & \textbf{Score} & \textbf{Max} & \textbf{Weight} &
    \textbf{Weighted Frac} \\
{% for row in student_totals %}
\hline
\textbf{ {{row[0]}} }
{% for x in row[1:] %}
    & {{x}}
{% endfor %} \\
{% endfor %}
\hline
\end{tabular}

\vspace{1em}
\textbf{Total weighted average, raw:} {{student_wavg*100}}\%

\textbf{Best weighted average, raw:} {{max_wavg*100}}\%

\textbf{Curve, $100 - \mathrm{best}$:} {{curve*100}}\%

\textbf{Total weighted average, curved:} {{(student_wavg+curve)*100}}\%

{% for category, asngs in sorted(grouped_assignments.items()) %}
\vspace{1em}\hrulefill

\section*{ {{category.capitalize()}} }

{% for asgn, sg in zip(asngs, student_grades[category]) %}
{% set asgn_id = asgn['_id'] %}
\subsection*{ {{asgn_id}} }

\begin{tabular}[h]{|l||c|c|c|c|}
\hline
\textbf{Question} & \textbf{Score} & \textbf{Max} & \textbf{Mean} & \textbf{STD} \\
{% for i in range(len(asgn['points'])) %}
\hline
\textbf{ {{asgn['questions'][i]}} } &
    {% if sg == None %}
    {\color{red} nil} &
    {% else %}
    {{sg['scores'][i]}} &
    {% endif %}
    {{asgn['points'][i]}} &
    {{stats[asgn_id][0][i]}} &
    {{stats[asgn_id][1][i]}} \\
{% endfor %}
\hline
\textbf{Total} &
    {% if sg == None %}
    {\color{red} nil} &
    {% else %}
    {{sum(sg['scores'])}} &
    {% endif %}
    {{sum(asgn['points'])}} &
    {{stats[asgn_id][2]}} &
    {{stats[asgn_id][3]}} \\
\hline
\end{tabular}
{% endfor %}


{% endfor %}

\end{document}
